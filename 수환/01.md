# 01장 계층화

- 소프트웨어 시스템을 분할하는 데 사용하는 가장 일반적인 기법
- 이점
  - 일관된 계층으로 이해
  - 동일한 기본 서비스를 가진 대안 계층 대체 가능
  - 계층 간의 의존성 최소화
  - 계층을 표준화하기 좋은 위치
  - 한 번 구축 시 다른 상위 서비스에서 사용 가능
- 단점
  - 전체가 효과적으로 캡슐화되지 않음
  - 성능 저하

## 엔터프라이즈 애플리케이션에서 계층의 발전

- 클라이언트-서버 시스템
  - 2계층 시스템
  - 도메인 논리가 복잡해지면 문제가 생김(비즈니스 규칙, 유효성 검사, 계산 등)
- 도메인 논리 문제에 대한 해결책으로 3계층 시스템 제안
  - 프레젠테이션 계층(UI), 도메인 계층, 데이터 원본
  - 웹의 등장, 객체지향이 프로그래밍의 주류가 되면서 진전을 이룸
- 계층 vs 티어
  - 티어는 물리적 분리를 함축

## 세 가지 주요 계층

- 프레젠테이션, 도메인, 데이터 원본
  - 프레젠테이션 논리는 사용자와 소프트웨어 간 상호작용 처리
  - 도메인 논리는 계산, 프레젠테이션에서 받은 데이터의 유효성 검사, 작업 대상이 될 데이터 원본 논리를 결정 등
  - 데이터 원본 논리는 애플리케이션을 대신해 다른 시스템과 통신
    - 모니터, 다른 애플리케이션, 메시징 등
- 세 가지 계층으로 안 나뉠 때도 있음
  - 적어도 서브루틴 수준에서 상황에 맞는 가장 적절한 분리 방법 선택 필요
- 서비스로 제공하는 인터페이스와 사용하기 위한 인터페이스를 구분할 수 있는 비대칭이 유용
- 도메인과 데이터 원본은 프레젠테이션에 의존하지 말아야 함
- 도메인 논리와 다른 형태의 논리를 잘 구분할 것

## 계층이 실행될 위치 선택

- 서버에서 실행
  - 웹브라우저를 활용하는 HTML 프런트가 좋은 예
- 클라이언트에서 실행
  - 응답성, 비연결 작업이 유리함
- 계층별 선택 위치
  - 데이터 원본은 거의 항상 서버에서 실행
  - 프레젠테이션 계층은 사용자 인터페이스의 유형에 따라 달라짐
  - 도메인 논리
    - 비즈니스 논리는 서버 또는 클라이언트에서 모두 실행하거나 분할 가능
