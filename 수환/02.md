# 02장 도메인 논리 구성

- 트랜잭션 스크립트
  - 가장 간단한 방식
  - 절차적 모델, 행 데이터 게이트웨이, 테이블 데이터 게이트웨이와 적합
  - 트랜잭션의 경계 설정 쉬움
  - 논리가 늘어나면 복잡도가 상승하는 단점
- 도메인 모델
  - 객체지향 지지자들의 패러다임 전환
  - 한 루틴이 사용자 작업의 논리를 모두 처리하는 것이 아닌, 각 객체가 관련된 논리의 일부를 담당
  - 복잡한 논리를 체계적으로 관리할 수 있는 다양한 기법 활용 가능
  - 사용의 복잡성과 데이터 원본 계층의 복잡성이 비용
- 테이블 모듈
  - 테이블 모듈은 일반적으로 DB 테이블마다 인스턴스가 단 하나
  - 레코드 집합과 함께 사용하도록 설계
  - 트랜잭션 스크립트와 도메인 모델의 중간 성격
  - 아키텍처의 나머지 부분과 잘 맞음

## 선택

- 도메인 논리가 얼마나 복잡하느냐에 따라 달라짐
  - 간단하다면 도메인 모델의 매력이 떨어짐
  - 어느 수준 이상 복잡해지면 트랜잭션 스크립트와 테이블 모듈 역시 효율이 떨어짐
- 테이블 모듈 선호도는 레코드 집합을 얼마나 잘 지원하느냐에 따라 달라짐
- 일단 결정을 내리면 리팩터링이 까다로울 수 있음
- 세 패턴은 상호 배타적인 선택은 아님

## 서비스 계층

- 서비스 계층을 기반이 되는 도메인 모델이나 테이블 모듈 위에 배치해서 계층을 둘로 나누는 것이 일반적
  - 트랜잭션 스크립트만 사용하는 도메인은 일반적으로 나누지 않음
- 서비스 계층
  - 명확한 API 제공
  - 트랜잭션 제어, 보안
  - 얼마나 많은 동작을 넣을지 결정하는 것이 중요
    - 중간적인 성격인 컨트롤러-엔티티 형식이 있음
