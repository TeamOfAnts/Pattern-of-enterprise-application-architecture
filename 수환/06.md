# 06장 세션 상태

## 상태 비저장의 가치

- 앤터프라이즈 애플리케이션의 상태 비저장 서버는 요청 간에 상태가 유지되지 않는 객체를 의미
- 상태 비저장에서 상태 저장으로의 전환
  - 서버 리소스가 필요
    - 상태를 저장하려면 항상 같은 객체 필요

## 세션 상태

- 세션 상태는 ACID 속성을 가짐
  - 동시성도 가짐
- 격리성
  - 일관성 없는 읽기가 발생할 수 있음
- 요청 간에 꼭 저장할 필요가 없는 데이터도 성능 향상을 위해 캐싱 할 수 있음

## 세션 상태를 저장하는 방법

- 클라이언트 세션 상태
  - 클라이언트에 저장
  - 필요한 대역폭 고려
    - 세션 상태의 양이 적지 않을 땐 사용하지 말 것
  - 보안과 무결성도 고려
  - 세션을 취소하고 다시 돌아오지 않는 서비스도 유용
    - 다른 서비스에선 작동 시간제한 지원 필요
- 서버 세션 상태
  - 메모리에 저장
  - 세션 상태를 직렬화된 객체와 같이 안정적으로 저장
  - 일반적으로 가장 쉽게 개발 가능
- 데이터베이스 세션 상태
  - 데이터베이스에 저장
  - 데이터의 양이 많지 않지만 유휴 사용자가 많을 때도 적절
- 세션 데이터는 격리해야 함
- 세션 마이그레이션
  - 한 서버에서 다른 서버로 이동해 한 서버가 요청 처리 시 다른 서버가 요청을 처리하게 해줌
  - 반대의 개념은 서버 선호도
    - 문제를 일으킬 수 있음
- 세 방식은 상호 배타적인 방식이 아님
